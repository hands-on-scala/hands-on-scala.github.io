<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="description" content="Let&#39;s learn Scala together!">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.15" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://hands-on-scala.github.io/css/style.css" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type="text/css">
<link rel="alternate" href="http://hands-on-scala.github.io/index.xml" type="application/rss+xml" title="Hands-on Scala Blog">
<title>Basic pattern matching in Scala - Hands-on Scala Blog</title>
</head>
<body>

<header>
  <div class="container">
    <a class="path" href="http://hands-on-scala.github.io/">[Hands-on Scala Blog]</a>
    <span class="caret"># _</span>
  </div>
</header>

<div class="container">


<main role="main" class="article">
  
<article class="single" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2016-05-06">May 06, 2016</time></span>


    <span class="key">in</span>
    <span class="val">

        <a href="http://hands-on-scala.github.io/categories/intro">intro</a>

        <a href="http://hands-on-scala.github.io/categories/patternmatching">patternmatching</a>

    </span>


  </div>
  <h1 class="headline" itemprop="headline">Basic pattern matching in Scala</h1>
  <section class="body" itemprop="articleBody">
    

<h1 id="why-should-we-care-about-pattern-matching:709c56cceaa353d481f380974d67f3c0">Why should we care about pattern matching?</h1>

<p>Pattern matching is a quite commonly used &ldquo;programming pattern&rdquo; in functional languages.
It&rsquo;s somewhat similar to a sequence of <em>if / else</em> statements or to the <em>switch</em> statement of Java, but it is
much more powerful, because it lets you <em>decompose</em> the object to be matched on the fly. This means
that you can apply rules based on the matched object&rsquo;s type or inner structure without having
to manually disassemble the object into its parts.</p>

<p>But, before going too deep, let&rsquo;s see two very basic examples.</p>

<h2 id="example-1-matching-value:709c56cceaa353d481f380974d67f3c0">Example 1: matching value</h2>

<p>Here the object what we match against is <em>x</em>, an integer. (But of course it could be something else, a String, or anything really.)
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">object</span> <span style="color: #a6e22e">MatchTest1</span> <span style="color: #66d9ef">extends</span> <span style="color: #a6e22e">App</span> <span style="color: #f92672">{</span>
  <span style="color: #66d9ef">def</span> <span style="color: #f8f8f2">matchTest</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">x</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">Int</span><span style="color: #f92672">)</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">String</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">x</span> <span style="color: #66d9ef">match</span> <span style="color: #f92672">{</span>
    <span style="color: #66d9ef">case</span> <span style="color: #ae81ff">1</span> <span style="color: #66d9ef">=&gt;</span> <span style="color: #e6db74">&quot;one&quot;</span>
    <span style="color: #66d9ef">case</span> <span style="color: #ae81ff">2</span> <span style="color: #66d9ef">=&gt;</span> <span style="color: #e6db74">&quot;two&quot;</span>
    <span style="color: #66d9ef">case</span> <span style="color: #66d9ef">_</span> <span style="color: #66d9ef">=&gt;</span> <span style="color: #e6db74">&quot;many&quot;</span>
  <span style="color: #f92672">}</span>
  <span style="color: #f8f8f2">println</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">matchTest</span><span style="color: #f92672">(</span><span style="color: #ae81ff">3</span><span style="color: #f92672">))</span>
<span style="color: #f92672">}</span>
</pre></div>

Fairly simple, isn&rsquo;t it? Just use the <em>match</em> keyword after the name of the
thing you&rsquo;ll want to match, and list your cases within curly braces.
The match expression in our case will return the value that appears on the right side of the &lsquo;=&gt;&rsquo; arrow, corresponding
to the first matching case. So the order of the _case_s will matter if there is some overlap among the left sides of the arrows!</p>

<p>One importatnt  thing to note is the last case where an underscore is used: this is Scala&rsquo;s notation
for &ldquo;match anything&rdquo;. Without this line, we would get a &ldquo;scala.MatchError&rdquo; because we called
the <em>matchTest()</em> function with the value 3, which is not covered by the other <em>case</em> branches.</p>

<p>So the main point to remember from here is that you should be sure to cover all
possible options when using a <em>match</em> expression if you want to avoid ugly errors.
The fail-safe option usually is to use the underscore as the last <em>case</em>.
It will define a default path for the program flow for &ldquo;all other cases&rdquo;.</p>

<p>(Note: I just copied this example from the
<a href="http://docs.scala-lang.org/tutorials/tour/pattern-matching.html">official documentation</a>).</p>

<h2 id="example-2-matching-type:709c56cceaa353d481f380974d67f3c0">Example 2: matching type</h2>

<p>If we want to write a function that behaves differently for different input types, we can write something like:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">def</span> <span style="color: #f8f8f2">getType</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">x</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">Any</span><span style="color: #f92672">)</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">String</span> <span style="color: #f92672">=</span> <span style="color: #f92672">{</span>
  <span style="color: #f8f8f2">x</span> <span style="color: #66d9ef">match</span> <span style="color: #f92672">{</span>
    <span style="color: #66d9ef">case</span> <span style="color: #f8f8f2">x</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">String</span> <span style="color: #f92672">=&gt;</span> <span style="color: #e6db74">&quot;String&quot;</span>
    <span style="color: #66d9ef">case</span> <span style="color: #f8f8f2">x</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">Integer</span> <span style="color: #f92672">=&gt;</span> <span style="color: #e6db74">&quot;Int&quot;</span>
    <span style="color: #66d9ef">case</span> <span style="color: #66d9ef">_</span> <span style="color: #66d9ef">=&gt;</span> <span style="color: #e6db74">&quot;I don&#39;t know&quot;</span>
  <span style="color: #f92672">}</span>
<span style="color: #f92672">}</span>
</pre></div>

Tha main difference from the previous example is that now we used &ldquo;x: Type&rdquo; instead of a specified value on the left side
of the arrow, after the <em>case</em> keyword. It&rsquo;s still simple :)</p>

<p>Note: <em>Any</em> is a general type in Scala, similar to the &ldquo;Object&rdquo; of Java, which is an ancestor of all other types.</p>

<h2 id="example-3-matching-structure:709c56cceaa353d481f380974d67f3c0">Example 3: matching structure</h2>

<p>I promised in the first paragraph that we will be able to &ldquo;<em>decompose</em> the object to be matched
on the fly&rdquo;.  How do we use this capability of Scala in our code?</p>

<p>To demonstrate this, at first we need some objects that have a structure.
Here we&rsquo;ll have a composite object, a <em>case class</em> (we&rsquo;ll learn more about case classes in another blog post)
representing a tweet message, that has three parts:</p>

<ul>
<li>an identifier (<em>id: Long</em>)</li>
<li>an author (<em>author: User</em>, that itself could be a complex type, now it only has a name)</li>
<li>a message (<em>msg: String</em>)</li>
</ul>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">case</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">User</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">name</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">String</span><span style="color: #f92672">)</span>
<span style="color: #66d9ef">case</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">TweetMsg</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">id</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">Long</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">user</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">User</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">msg</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">String</span><span style="color: #f92672">)</span>
</pre></div>
</p>

<p>And now a function can match a tweet&rsquo;s inners like in the following code snippet:</p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">def</span> <span style="color: #f8f8f2">processTweet</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">tweet</span><span style="color: #66d9ef">:</span> <span style="color: #66d9ef">TweetMsg</span><span style="color: #f92672">)</span> <span style="color: #66d9ef">=</span> <span style="color: #f8f8f2">tweet</span> <span style="color: #66d9ef">match</span> <span style="color: #f92672">{</span>
  <span style="color: #66d9ef">case</span> <span style="color: #a6e22e">TweetMsg</span><span style="color: #f92672">(</span><span style="color: #f8f8f2">id</span><span style="color: #f92672">,</span> <span style="color: #66d9ef">_</span><span style="color: #f92672">,</span> <span style="color: #66d9ef">_</span><span style="color: #f92672">)</span> <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">id</span> <span style="color: #f92672">&lt;</span> <span style="color: #ae81ff">0</span> <span style="color: #66d9ef">=&gt;</span> <span style="color: #e6db74">&quot;Invalid (negative) tweet id!&quot;</span>
  <span style="color: #66d9ef">case</span> <span style="color: #a6e22e">TweetMsg</span><span style="color: #f92672">(</span><span style="color: #66d9ef">_</span><span style="color: #f92672">,</span> <span style="color: #f8f8f2">user</span><span style="color: #f92672">,</span> <span style="color: #66d9ef">_</span><span style="color: #f92672">)</span> <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">user</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&quot;adorster&quot;</span> <span style="color: #66d9ef">=&gt;</span> <span style="color: #e6db74">&quot;Welcome, &quot;</span> <span style="color: #f92672">+</span> <span style="color: #f8f8f2">user</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">+</span> <span style="color: #e6db74">&quot;!&quot;</span>
  <span style="color: #66d9ef">case</span> <span style="color: #66d9ef">_</span> <span style="color: #66d9ef">=&gt;</span> <span style="color: #e6db74">&quot;Just another tweet&quot;</span>
<span style="color: #f92672">}</span>
</pre></div>
</p>

<p>The &ldquo;if thisAndThat&rdquo; parts on the left sides of the arrows are called &ldquo;guards&rdquo;, and I should have explained them in the previous example to keep this one simpler :) W.I.P.</p>

<p>Example codes with tests are available at <a href="https://github.com/ador/scala-examples/tree/master/02_pattern_match_app">my scala-examples github repo</a>.</p>

  </section>
</article>

</main>


</div>

<footer>
  <div class="container">
    <span class="copyright">&copy; 2016  Hands-on Scala Blog - <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span>
  </div>
</footer>

</body>
</html>

